<form class="sheet actor t4d">
  <div class="sheet-container">

    <div class="sheet-toggle-wrapper">
      <input type="checkbox" name="actor.system.AIMode" class="sheet-toggle" id="AI_Mode_Toggle" />
      <label for="AI_Mode_Toggle" class="sheet-toggle-label">
        <span class="sheet-toggle-state">
          <span class="sheet-toggle-ai">AI Mode</span>
        </span>
      </label>
    </div>

    <div class="sheet-section-block sheet-theme-bio">
      <div class="sheet-group-title">
        <h2 class="section-title">Bio Attributes</h2>
      </div>

      <div class="sheet-2colrow">

<!--Primary Attributes-->
   <h3>Primary Attributes</h3>
<table class="sheet-attribute-table">
  <thead>
    <tr>
      <th>Attribute</th>
      <th>Score</th>
      <th>Modifier</th>
      <th>AP to Next</th>
      <th>Total AP Spent</th>
      <th>Temporary Modifier</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Strength</td>
      <td><input type="number" name="system.attributes.primary.STR.score" value="{{system.attributes.primary.STR.score}}" style="color: black !important; background-color: white !important; font-size: 16px !important; opacity: 1 !important;" /></td>
      <td><input type="number" name="system.attributes.primary.STR.mod" value="{{system.attributes.primary.STR.mod}}" readonly/></td>
      <td><input type="number" name="system.attributes.primary.STR.apToNext" value="{{system.attributes.primary.STR.apToNext}}" readonly /></td>
      <td><input type="number" name="system.attributes.primary.STR.apTotal" value="{{system.attributes.primary.STR.apTotal}}" readonly/></td>
      <td><input type="number" name="system.attributes.primary.STR.temp" value="{{system.attributes.primary.STR.temp}}" /></td>
    </tr>
    <tr>
      <td>Dexterity</td>
      <td><input type="number" name="system.attributes.primary.DEX.score" value="{{system.attributes.primary.DEX.score}}" /></td>
      <td><input type="number" name="system.attributes.primary.DEX.mod" value="{{system.attributes.primary.DEX.mod}}" /></td>
      <td><input type="number" name="system.attributes.primary.DEX.apToNext" value="{{system.attributes.primary.DEX.apToNext}}" /></td>
      <td><input type="number" name="system.attributes.primary.DEX.apTotal" value="{{system.attributes.primary.DEX.apTotal}}" /></td>
      <td><input type="number" name="system.attributes.primary.DEX.temp" value="{{system.attributes.primary.DEX.temp}}" /></td>
    </tr>
    <tr>
      <td>Constitution</td>
      <td><input type="number" name="system.attributes.primary.CON.score" value="{{system.attributes.primary.CON.score}}" /></td>
      <td><input type="number" name="system.attributes.primary.CON.mod" value="{{system.attributes.primary.CON.mod}}" /></td>
      <td><input type="number" name="system.attributes.primary.CON.apToNext" value="{{system.attributes.primary.CON.apToNext}}" /></td>
      <td><input type="number" name="system.attributes.primary.CON.apTotal" value="{{system.attributes.primary.CON.apTotal}}" /></td>
      <td><input type="number" name="system.attributes.primary.CON.temp" value="{{system.attributes.primary.CON.temp}}" /></td>
    </tr>
    <tr>
      <td>Intelligence</td>
      <td><input type="number" name="system.attributes.primary.INT.score" value="{{system.attributes.primary.INT.score}}" /></td>
      <td><input type="number" name="system.attributes.primary.INT.mod" value="{{system.attributes.primary.INT.mod}}" /></td>
      <td><input type="number" name="system.attributes.primary.INT.apToNext" value="{{system.attributes.primary.INT.apToNext}}" /></td>
      <td><input type="number" name="system.attributes.primary.INT.apTotal" value="{{system.attributes.primary.INT.apTotal}}" /></td>
      <td><input type="number" name="system.attributes.primary.INT.temp" value="{{system.attributes.primary.INT.temp}}" /></td>
    </tr>
    <tr>
      <td>Focus</td>
      <td><input type="number" name="system.attributes.primary.FOC.score" value="{{system.attributes.primary.FOC.score}}" /></td>
      <td><input type="number" name="system.attributes.primary.FOC.mod" value="{{system.attributes.primary.FOC.mod}}" /></td>
      <td><input type="number" name="system.attributes.primary.FOC.apToNext" value="{{system.attributes.primary.FOC.apToNext}}" /></td>
      <td><input type="number" name="system.attributes.primary.FOC.apTotal" value="{{system.attributes.primary.FOC.apTotal}}" /></td>
      <td><input type="number" name="system.attributes.primary.FOC.temp" value="{{system.attributes.primary.FOC.temp}}" /></td>
    </tr>
    <tr>
      <td>Charisma</td>
      <td><input type="number" name="system.attributes.primary.CHA.score" value="{{system.attributes.primary.CHA.score}}" /></td>
      <td><input type="number" name="system.attributes.primary.CHA.mod" value="{{system.attributes.primary.CHA.mod}}" /></td>
      <td><input type="number" name="system.attributes.primary.CHA.apToNext" value="{{system.attributes.primary.CHA.apToNext}}" /></td>
      <td><input type="number" name="system.attributes.primary.CHA.apTotal" value="{{system.attributes.primary.CHA.apTotal}}" /></td>
      <td><input type="number" name="system.attributes.primary.CHA.temp" value="{{system.attributes.primary.CHA.temp}}" /></td>
    </tr>
  </tbody>
</table>
<!--Secondary Attributes-->
    <h3 class="section-subtitle">Secondary Attributes</h3>
<div class="sheet-attribute-wrapper">
  <table class="sheet-attribute-table">
    <thead>
      <tr>
        <th>Attribute</th>
        <th>Score</th>
        <th>Modifier</th>
        <th>Temporary Modifier</th>
        <th>Initiative Roll</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Initiative</td>
        <td><input type="number" name="system.attributes.secondary.INIT.score" value="{{system.attributes.secondary.INIT.score}}" readonly /></td>
        <td><input type="number" name="system.attributes.secondary.INIT.mod" value="{{system.attributes.secondary.INIT.mod}}" readonly /></td>
        <td><input type="number" name="system.attributes.secondary.INIT.temp" value="{{system.attributes.secondary.INIT.temp}}" /></td>
        <td>
          <button type="button" class="roll-init" data-label="Initiative">Roll</button>
        </td>
      </tr>
      <tr>
        <td>Education</td>
        <td><input type="number" name="system.attributes.secondary.EDU.score" value="{{system.attributes.secondary.EDU.score}}" readonly /></td>
        <td><input type="number" name="system.attributes.secondary.EDU.mod" value="{{system.attributes.secondary.EDU.mod}}" readonly /></td>
        <td><input type="number" name="system.attributes.secondary.EDU.temp" value="{{system.attributes.secondary.EDU.temp}}" /></td>
        <td></td>
      </tr>
      <tr>
        <td>Speed</td>
        <td><input type="number" name="system.attributes.secondary.SPD.score" value="{{system.attributes.secondary.SPD.score}}" readonly /></td>
        <td><input type="number" name="system.attributes.secondary.SPD.mod" value="{{system.attributes.secondary.SPD.mod}}" readonly /></td>
        <td><input type="number" name="system.attributes.secondary.SPD.temp" value="{{system.attributes.secondary.SPD.temp}}" /></td>
        <td></td>
      </tr>
      <tr>
        <td>Movement</td>
        <td><input type="number" name="system.attributes.secondary.MVMT.score" value="{{system.attributes.secondary.MVMT.score}}" readonly /></td>
        <td><input type="number" name="system.attributes.secondary.MVMT.mod" value="{{system.attributes.secondary.MVMT.mod}}" readonly /></td>
        <td><input type="number" name="system.attributes.secondary.MVMT.temp" value="{{system.attributes.secondary.MVMT.temp}}" /></td>
        <td></td>
      </tr>
      <tr>
        <td>Appearance</td>
        <td><input type="number" name="system.attributes.appearance.score" value="{{system.attributes.appearance.score}}" min="3" max="30" /></td>
        <td colspan="2">
          <input type="text" name="system.attributes.appearance.desc" value="{{system.attributes.appearance.desc}}" readonly />
        </td>
        <td></td>
      </tr>
    </tbody>
  </table>
</div>

<div class="sheet-ap-summary">
  <span class="sheet-ap-label">Total AP Spent:
    <input type="number" name="system.ap.totalSpent" value="{{system.ap.totalSpent}}" readonly />
  </span>
  <span class="sheet-ap-label">Unspent AP:
    <input type="number" name="system.ap.unspent" value="{{system.ap.unspent}}" />
  </span>
</div>


<div class="sheet-section-block sheet-theme-bio">
  <div class="sheet-group-title">
    <h2 class="section-title">Bio Stability</h2>
  </div>

  <div class="sheet-3colrow sheet-stability-wrapper">

    <!--BioSaving Throws-->
<div class="sheet-col">
  <div class="row sheet-saves-block">
    <h3 class="section-subtitle">Bio Saving Throws</h3>
    <div class="sheet-save-wrapper">
      <table class="sheet-save-table">
        <thead>
          <tr>
            <th>Attribute</th>
            <th>Score</th>
            <th>Temporary Modifier</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>
              <button type="button" class="roll-save" data-label="Physical">Physical</button>
            </td>
            <td><input type="number" name="system.saves.PHYSICAL.score" value="{{actor.system.saves.PHYSICAL.score}}" readonly /></td>
            <td><input type="number" name="system.saves.PHYSICAL.temp" value="{{actor.system.saves.PHYSICAL.temp}}" /></td>
          </tr>
          <tr>
            <td>
              <button type="button" class="roll-save" data-label="Mental">Mental</button>
            </td>
            <td><input type="number" name="system.saves.MENTAL.score" value="{{actor.system.saves.MENTAL.score}}" readonly /></td>
            <td><input type="number" name="system.saves.MENTAL.temp" value="{{actor.system.saves.MENTAL.temp}}" /></td>
          </tr>
          <tr>
            <td>
              <button type="button" class="roll-save" data-label="Evasion">Evasion</button>
            </td>
            <td><input type="number" name="system.saves.EVASION.score" value="{{actor.system.saves.EVASION.score}}" readonly /></td>
            <td><input type="number" name="system.saves.EVASION.temp" value="{{actor.system.saves.EVASION.temp}}" /></td>
          </tr>
          <tr>
            <td>
              <button type="button" class="roll-save" data-label="Social">Social</button>
            </td>
            <td><input type="number" name="system.saves.SOCIAL.score" value="{{actor.system.saves.SOCIAL.score}}" readonly /></td>
            <td><input type="number" name="system.saves.SOCIAL.temp" value="{{actor.system.saves.SOCIAL.temp}}" /></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- ===== Bio Status ===== -->
<div class="sheet-col">
  <div class="row sheet-status-block">
    <h3 class="section-subtitle">Bio Status</h3>
    <div class="sheet-status-wrapper">
      <table class="sheet-status-table">
        <thead>
          <tr>
            <th></th>
            <th>Max</th>
            <th>Current</th>
            <th>Min</th>
            <th>Temp</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>HP</td>
            <td><input type="number" name="system.status.hp.max" value="{{actor.system.status.hp.max}}" readonly /></td>
            <td><input type="number" name="system.status.hp.current" value="{{actor.system.status.hp.current}}" /></td>
            <td><input type="number" name="system.status.hp.min" value="{{actor.system.status.hp.min}}" readonly /></td>
            <td><input type="number" name="system.status.hp.temp" value="{{actor.system.status.hp.temp}}" /></td>
          </tr>
          <tr>
            <td>MP</td>
            <td><input type="number" name="system.status.mp.max" value="{{actor.system.status.mp.max}}" readonly /></td>
            <td><input type="number" name="system.status.mp.current" value="{{actor.system.status.mp.current}}" /></td>
            <td><input type="number" name="system.status.mp.min" value="{{actor.system.status.mp.min}}" readonly /></td>
            <td><input type="number" name="system.status.mp.temp" value="{{actor.system.status.mp.temp}}" /></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- ===== Bio Stress ===== -->
<div class="sheet-col">
  <div class="row sheet-stress-block">
    <h3 class="section-subtitle">Stress</h3>
    <div class="sheet-stress-wrapper">
      <select class="sheet-stress-select" name="system.stress.level">
        <option value="0" {{#if (eq actor.system.stress.level 0)}}selected{{/if}}>No Stress</option>
        <option value="-2" {{#if (eq actor.system.stress.level -2)}}selected{{/if}}>1 Stress</option>
        <option value="-5" {{#if (eq actor.system.stress.level -5)}}selected{{/if}}>2 Stress</option>
        <option value="-10" {{#if (eq actor.system.stress.level -10)}}selected{{/if}}>3 Stress</option>
        <option value="-15" {{#if (eq actor.system.stress.level -15)}}selected{{/if}}>4 Stress</option>
        <option value="2" {{#if (eq actor.system.stress.level 2)}}selected{{/if}}>Inspired</option>
      </select>
      <div class="sheet-stress-penalty">
        <label class="sheet-stress-label">Penalty:</label>
        <input type="number" name="system.stress.penalty" value="{{actor.system.stress.penalty}}" readonly />
      </div>
    </div>
  </div>
</div>

</div> <!-- End .sheet-3colrow -->
</div> <!-- End .sheet-section-block -->

<div class="sheet-section-block sheet-theme-bio">
  <div class="sheet-group-title">
    <h2 class="section-title">Bio Skills</h2>
  </div>

  <div class="sheet-2colrow sheet-skills-wrapper">

  <!-- ===== Bio Combat Skills Column ===== -->
<div class="sheet-col">
  <div class="row sheet-skillgroup-combat">
    <h3 class="section-subtitle">Bio Combat Skills</h3>

    <div class="sheet-skill-header">
      <span class="sheet-skill-spacer"></span>
      <span class="sheet-skill-label">Skill</span>
      <span class="sheet-skill-label">Level</span>
      <span class="sheet-skill-label">XP</span>
      <span class="sheet-skill-label">Attribute</span>
    </div>

    <div class="sheet-skill-entry">
      <button type="button"
              class="roll-skill"
              data-group="skills.combat"
              data-key="simpleWeapons">
        Simple Weapons
      </button>
      <input type="text" name="system.skills.combat.simpleWeapons.label" value="Simple Weapons" readonly />
      <input type="number" name="system.skills.combat.simpleWeapons.level" value="{{actor.system.skills.combat.simpleWeapons.level}}" min="0" />
      <input type="number" name="system.skills.combat.simpleWeapons.xp" value="{{actor.system.skills.combat.simpleWeapons.xp}}" min="0" />
      <select name="system.skills.combat.simpleWeapons.attribute">
        <option value="STR" {{#if (eq actor.system.skills.combat.simpleWeapons.attribute "STR")}}selected{{/if}}>STR</option>
        <option value="DEX" {{#if (eq actor.system.skills.combat.simpleWeapons.attribute "DEX")}}selected{{/if}}>DEX</option>
        <option value="CON" {{#if (eq actor.system.skills.combat.simpleWeapons.attribute "CON")}}selected{{/if}}>CON</option>
        <option value="INT" {{#if (eq actor.system.skills.combat.simpleWeapons.attribute "INT")}}selected{{/if}}>INT</option>
        <option value="FOC" {{#if (eq actor.system.skills.combat.simpleWeapons.attribute "FOC")}}selected{{/if}}>FOC</option>
        <option value="CHA" {{#if (eq actor.system.skills.combat.simpleWeapons.attribute "CHA")}}selected{{/if}}>CHA</option>
      </select>
    </div>

    <div class="sheet-skill-entry">
      <button type="button"
              class="roll-skill"
              data-group="skills.combat"
              data-key="projectileWeapons">
        Projectile Weapons
      </button>
      <input type="text" name="system.skills.combat.projectileWeapons.label" value="Projectile Weapons" readonly />
      <input type="number" name="system.skills.combat.projectileWeapons.level" value="{{actor.system.skills.combat.projectileWeapons.level}}" min="0" />
      <input type="number" name="system.skills.combat.projectileWeapons.xp" value="{{actor.system.skills.combat.projectileWeapons.xp}}" min="0" />
      <select name="system.skills.combat.projectileWeapons.attribute">
        <option value="STR" {{#if (eq actor.system.skills.combat.projectileWeapons.attribute "STR")}}selected{{/if}}>STR</option>
        <option value="DEX" {{#if (eq actor.system.skills.combat.projectileWeapons.attribute "DEX")}}selected{{/if}}>DEX</option>
        <option value="CON" {{#if (eq actor.system.skills.combat.projectileWeapons.attribute "CON")}}selected{{/if}}>CON</option>
        <option value="INT" {{#if (eq actor.system.skills.combat.projectileWeapons.attribute "INT")}}selected{{/if}}>INT</option>
        <option value="FOC" {{#if (eq actor.system.skills.combat.projectileWeapons.attribute "FOC")}}selected{{/if}}>FOC</option>
        <option value="CHA" {{#if (eq actor.system.skills.combat.projectileWeapons.attribute "CHA")}}selected{{/if}}>CHA</option>
      </select>
    </div>

  </div>
</div>

 <!-- ===== Bio Detection Skills Column ===== -->
<div class="sheet-col">
  <div class="row sheet-skillgroup-detection">
    <h3 class="section-subtitle">Bio Detection Skills</h3>

    <div class="sheet-skill-header">
      <span class="sheet-skill-spacer"></span>
      <span class="sheet-skill-label">Skill</span>
      <span class="sheet-skill-label">Level</span>
      <span class="sheet-skill-label">XP</span>
      <span class="sheet-skill-label">Attribute</span>
    </div>

    <div class="sheet-skill-entry">
      <button type="button"
              class="roll-skill"
              data-group="skills.detection"
              data-key="perception">
        Perception
      </button>
      <input type="text" name="system.skills.detection.perception.label" value="Perception" readonly />
      <input type="number" name="system.skills.detection.perception.level" value="{{actor.system.skills.detection.perception.level}}" min="0" />
      <input type="number" name="system.skills.detection.perception.xp" value="{{actor.system.skills.detection.perception.xp}}" min="0" />
      <select name="system.skills.detection.perception.attribute">
        <option value="STR" {{#if (eq actor.system.skills.detection.perception.attribute "STR")}}selected{{/if}}>STR</option>
        <option value="DEX" {{#if (eq actor.system.skills.detection.perception.attribute "DEX")}}selected{{/if}}>DEX</option>
        <option value="CON" {{#if (eq actor.system.skills.detection.perception.attribute "CON")}}selected{{/if}}>CON</option>
        <option value="INT" {{#if (eq actor.system.skills.detection.perception.attribute "INT")}}selected{{/if}}>INT</option>
        <option value="FOC" {{#if (eq actor.system.skills.detection.perception.attribute "FOC")}}selected{{/if}}>FOC</option>
        <option value="CHA" {{#if (eq actor.system.skills.detection.perception.attribute "CHA")}}selected{{/if}}>CHA</option>
      </select>
    </div>

    <div class="sheet-skill-entry">
      <button type="button"
              class="roll-skill"
              data-group="skills.detection"
              data-key="intuition">
        Intuition
      </button>
      <input type="text" name="system.skills.detection.intuition.label" value="Intuition" readonly />
      <input type="number" name="system.skills.detection.intuition.level" value="{{actor.system.skills.detection.intuition.level}}" min="0" />
      <input type="number" name="system.skills.detection.intuition.xp" value="{{actor.system.skills.detection.intuition.xp}}" min="0" />
      <select name="system.skills.detection.intuition.attribute">
        <option value="STR" {{#if (eq actor.system.skills.detection.intuition.attribute "STR")}}selected{{/if}}>STR</option>
        <option value="DEX" {{#if (eq actor.system.skills.detection.intuition.attribute "DEX")}}selected{{/if}}>DEX</option>
        <option value="CON" {{#if (eq actor.system.skills.detection.intuition.attribute "CON")}}selected{{/if}}>CON</option>
        <option value="INT" {{#if (eq actor.system.skills.detection.intuition.attribute "INT")}}selected{{/if}}>INT</option>
        <option value="FOC" {{#if (eq actor.system.skills.detection.intuition.attribute "FOC")}}selected{{/if}}>FOC</option>
        <option value="CHA" {{#if (eq actor.system.skills.detection.intuition.attribute "CHA")}}selected{{/if}}>CHA</option>
      </select>
    </div>

  </div>
</div>

<!-- ===== BIO TRAINING PACKAGES BLOCK ===== -->
<div class="sheet-section-block sheet-theme-bio">
  <div class="sheet-group-title">
    <h2 class="section-title">Bio Training Packages</h2>
  </div>

  <div class="sheet-skillgroup-training">
    {{#each actor.system.skills.trainingPackages}}
    <div class="sheet-skill-entry">
      <button type="button"
              class="roll-skill"
              data-group="skills.trainingPackages"
              data-index="{{@index}}">
        {{this.label}}
      </button>
      <input type="text" name="system.skills.trainingPackages.{{@index}}.label" value="{{this.label}}" />
      <input type="number" name="system.skills.trainingPackages.{{@index}}.level" value="{{this.level}}" min="0" />
      <input type="number" name="system.skills.trainingPackages.{{@index}}.xp" value="{{this.xp}}" min="0" />
      <select name="system.skills.trainingPackages.{{@index}}.attribute">
        <option value="STR" {{#if (eq this.attribute "STR")}}selected{{/if}}>STR</option>
        <option value="DEX" {{#if (eq this.attribute "DEX")}}selected{{/if}}>DEX</option>
        <option value="CON" {{#if (eq this.attribute "CON")}}selected{{/if}}>CON</option>
        <option value="INT" {{#if (eq this.attribute "INT")}}selected{{/if}}>INT</option>
        <option value="FOC" {{#if (eq this.attribute "FOC")}}selected{{/if}}>FOC</option>
        <option value="CHA" {{#if (eq this.attribute "CHA")}}selected{{/if}}>CHA</option>
      </select>
      <textarea name="system.skills.trainingPackages.{{@index}}.notes">{{this.notes}}</textarea>
    </div>
    {{/each}}

    <!-- Optional: Add Training Package button -->
    <button type="button" class="add-training-package">
      + Add Training Package
    </button>
  </div>
</div>

<!-- ===== BIO GEAR BLOCK ===== -->
</div>
</div>
<div class="sheet-section-block sheet-theme-bio">
  <div class="sheet-group-title">
    <h2 class="section-title">Bio Gear</h2>
  </div>

  <div class="sheet-gear-wrapper sheet-gear-layout">

    <div class="sheet-gear-block sheet-gear-summary">
      <div class="sheet-gear-cell">
        <span class="sheet-gear-label">Readied Items</span>
        <input type="number" name="system.gear.readied.total" value="{{actor.system.gear.readied.total}}" readonly />
      </div>
      <div class="sheet-gear-cell">
        <span class="sheet-gear-label">Max Readied</span>
        <input type="number" value="5" readonly />
      </div>
      <div class="sheet-gear-cell">
        <span class="sheet-gear-label">Current Load</span>
        <input type="number" name="system.gear.carriedWeight" value="{{actor.system.gear.carriedWeight}}" readonly />
      </div>
      <div class="sheet-gear-cell">
        <span class="sheet-gear-label" title="Add your total weapon and armor delay.">Init Penalty</span>
        <input type="number" name="system.gear.initiativePenalty" value="{{actor.system.gear.initiativePenalty}}" />
      </div>
    </div>

    <div class="sheet-gear-block sheet-gear-tiers">
      <div class="sheet-gear-cell">
        <span class="sheet-gear-label">Light Load</span>
        <input type="number" name="system.gear.encumbranceThresholds.light" value="{{actor.system.gear.encumbranceThresholds.light}}" readonly />
      </div>
      <div class="sheet-gear-cell">
        <span class="sheet-gear-label">Moderate Load (-2)</span>
        <input type="number" name="system.gear.encumbranceThresholds.moderate" value="{{actor.system.gear.encumbranceThresholds.moderate}}" readonly />
      </div>
      <div class="sheet-gear-cell">
        <span class="sheet-gear-label">Heavy Load (-5)</span>
        <input type="number" name="system.gear.encumbranceThresholds.heavy" value="{{actor.system.gear.encumbranceThresholds.heavy}}" readonly />
      </div>
      <div class="sheet-gear-cell">
        <span class="sheet-gear-label">Max Carry (-10)</span>
        <input type="number" name="system.gear.encumbranceThresholds.max" value="{{actor.system.gear.encumbranceThresholds.max}}" readonly />
      </div>
      <div class="sheet-gear-cell">
        <span class="sheet-gear-label">Push/Drag (-15)</span>
        <input type="number" name="system.gear.encumbranceThresholds.pushDrag" value="{{actor.system.gear.encumbranceThresholds.pushDrag}}" readonly />
      </div>
    </div>

  </div>
</div>

<!-- ===== BIO WEAPONS BLOCK ===== -->
<div class="sheet-section-block sheet-theme-bio">
  <div class="sheet-group-title">
    <h2 class="section-title">Bio Weapons</h2>
  </div>

  <div class="sheet-weapon-wrapper sheet-weapons-layout">
    <div class="sheet-weapon-header">
      <span>Weapon</span>
      <span>Skill</span>
      <span>Atk Bonus</span>
      <span>Damage</span>
      <span>Spd</span>
      <span>Ammo</span>
      <span>Mag</span>
      <span>Range</span>
      <span>HP</span>
      <span>Max HP</span>
      <span>Enc</span>
      <span>Cost</span>
      <span>Readied</span>
      <span>Carried</span>
    </div>

{{#each actor.system.weapons}}
<div class="sheet-weapon-entry">
  <button type="button"
          class="roll-weapon"
          data-group="weapons"
          data-index="{{@index}}">
    {{this.name}}
  </button>

  <input type="text" name="system.weapons.{{@index}}.name" value="{{this.name}}" />

  <select name="system.weapons.{{@index}}.skill">
    <option value="Simple" {{#if (eq this.skill "Simple")}}selected{{/if}}>Simple</option>
    <option value="Projectile" {{#if (eq this.skill "Projectile")}}selected{{/if}}>Projectile</option>
  </select>

  <!-- NEW: Attribute selection -->
  <select name="system.weapons.{{@index}}.attribute">
    <option value="STR" {{#if (eq this.attribute "STR")}}selected{{/if}}>STR</option>
    <option value="DEX" {{#if (eq this.attribute "DEX")}}selected{{/if}}>DEX</option>
    <option value="CON" {{#if (eq this.attribute "CON")}}selected{{/if}}>CON</option>
    <option value="INT" {{#if (eq this.attribute "INT")}}selected{{/if}}>INT</option>
    <option value="FOC" {{#if (eq this.attribute "FOC")}}selected{{/if}}>FOC</option>
    <option value="CHA" {{#if (eq this.attribute "CHA")}}selected{{/if}}>CHA</option>
  </select>

  <input type="number" name="system.weapons.{{@index}}.atkBonus" value="{{this.atkBonus}}" />
  <input type="text" name="system.weapons.{{@index}}.damage" value="{{this.damage}}" />
  <input type="number" name="system.weapons.{{@index}}.spd" value="{{this.spd}}" />
  <input type="number" name="system.weapons.{{@index}}.ammo" value="{{this.ammo}}" />
  <input type="number" name="system.weapons.{{@index}}.mag" value="{{this.mag}}" />
  <input type="text" name="system.weapons.{{@index}}.range" value="{{this.range}}" />
  <input type="number" name="system.weapons.{{@index}}.hp" value="{{this.hp}}" />
  <input type="number" name="system.weapons.{{@index}}.maxHp" value="{{this.maxHp}}" />
  <input type="number" name="system.weapons.{{@index}}.weight" value="{{this.weight}}" />
  <input type="number" name="system.weapons.{{@index}}.cost" value="{{this.cost}}" />
  <input type="checkbox" name="system.weapons.{{@index}}.readied" {{#if this.readied}}checked{{/if}} />
  <input type="checkbox" name="system.weapons.{{@index}}.carried" {{#if this.carried}}checked{{/if}} />
  <textarea name="system.weapons.{{@index}}.notes">{{this.notes}}</textarea>
</div>
{{/each}}

<!-- Add Weapon Button -->
<button type="button" class="add-weapon">
  + Add Weapon
</button>


<!-- ===== BIO ARMOR BLOCK ===== -->
<div class="sheet-section-block sheet-theme-bio">
  <div class="sheet-group-title">
    <h2 class="section-title">Bio Armor</h2>
  </div>

  <div class="sheet-armor-wrapper sheet-armor-layout">
    <div class="sheet-armor-header">
      <span>Armor</span>
      <span>Max</span>
      <span>Current</span>
      <span>Init Mod</span>
      <span>Enc</span>
      <span>Cost</span>
      <span>Readied</span>
      <span>Carried</span>
    </div>
{{#each actor.system.armor}}
<div class="sheet-armor-entry">
  <input type="text" name="system.armor.{{@index}}.name" value="{{this.name}}" />
  <input type="number" name="system.armor.{{@index}}.max" value="{{this.max}}" />
  <input type="number" name="system.armor.{{@index}}.current" value="{{this.current}}" />
  <input type="number" name="system.armor.{{@index}}.spdPenalty" value="{{this.spdPenalty}}" />
  <input type="number" name="system.armor.{{@index}}.weight" value="{{this.weight}}" />
  <input type="text" name="system.armor.{{@index}}.cost" value="{{this.cost}}" />
  <input type="checkbox" name="system.armor.{{@index}}.readied" {{#if this.readied}}checked{{/if}} />
  <input type="checkbox" name="system.armor.{{@index}}.carried" {{#if this.carried}}checked{{/if}} />
  <textarea name="system.armor.{{@index}}.notes">{{this.notes}}</textarea>
</div>
{{/each}}

<!-- Add Armor Button -->
<button type="button" class="add-armor">
  + Add Armor
</button>

<!-- ===== BIO ITEMS BLOCK ===== -->
<div class="sheet-section-block sheet-theme-bio">
  <div class="sheet-group-title">
    <h2 class="section-title">Bio Items</h2>
  </div>

  <div class="sheet-items-wrapper sheet-items-layout">
    <div class="sheet-items-header">
      <span>Item</span>
      <span>#</span>
      <span>Location</span>
      <span>Enc</span>
      <span>Readied</span>
      <span>Carried</span>
    </div>
{{#each actor.system.items}}
<div class="sheet-items-entry">
  <input type="text" name="system.items.{{@index}}.name" value="{{this.name}}" />
  <input type="number" name="system.items.{{@index}}.quantity" value="{{this.quantity}}" />
  <input type="text" name="system.items.{{@index}}.location" value="{{this.location}}" />
  <input type="number" name="system.items.{{@index}}.weight" value="{{this.weight}}" />
  <input type="checkbox" name="system.items.{{@index}}.readied" {{#if this.readied}}checked{{/if}} />
  <input type="checkbox" name="system.items.{{@index}}.carried" {{#if this.carried}}checked{{/if}} />
  <textarea name="system.items.{{@index}}.notes">{{this.notes}}</textarea>
</div>
{{/each}}

<!-- Add Item Button -->
<button type="button" class="add-item">
  + Add Item
</button>


<!-- ===== BIO NANITE BLOCK ===== -->
<div class="sheet-section-block sheet-theme-bio">
  <div class="sheet-group-title">
    <h2 class="section-title">Bio Nanite Tech</h2>
  </div>

  <!-- ===== Nanite Accelerators ===== -->
  <div class="sheet-subsection-block sheet-nanite-group">
    <h3 class="section-subtitle">Nanite Accelerators</h3>

    <div class="sheet-nanite-header">
      <span class="sheet-nanite-spacer"></span>
      <span>Accelerator</span>
      <span>Type</span>
    </div>

{{#each actor.system.nanite.catalysts}}
<div class="sheet-nanite-block">
  <div class="sheet-nanite-entry sheet-nanite-accelerator">
    <button type="button"
            class="roll-nanite"
            data-group="nanite.catalysts"
            data-index="{{@index}}">
      {{this.name}}
    </button>
    <input type="text" name="system.nanite.catalysts.{{@index}}.name" value="{{this.name}}" />
    <select name="system.nanite.catalysts.{{@index}}.type">
      <option value="1d4" {{#if (eq this.type "1d4")}}selected{{/if}}>Minor</option>
      <option value="5d4" {{#if (eq this.type "5d4")}}selected{{/if}}>Major</option>
    </select>
  </div>
  <div class="sheet-nanite-notes-row">
    <textarea name="system.nanite.catalysts.{{@index}}.notes">{{this.notes}}</textarea>
  </div>
</div>
{{/each}}

<!-- Add Nanite Accelerator Button -->
<button type="button" class="add-nanite-catalyst">
  + Add Nanite Accelerator
</button>

 <!-- ===== Basic Nanite Tech ===== -->
<div class="sheet-subsection-block sheet-nanite-group">
  <h3 class="section-subtitle">Basic Nanite Tech</h3>

  <div class="sheet-basic-nanite-header">
    <span class="sheet-roll-spacer"></span>
    <span>Reaction</span>
    <span>MP</span>
    <span>Speed</span>
    <span>Level</span>
    <span>XP</span>
  </div>

 {{#each actor.system.nanite.basicReactions}}
<div class="sheet-nanite-block">
  <div class="sheet-basic-nanite-entry">
    <button type="button"
            class="roll-nanite"
            data-group="nanite.basicReactions"
            data-index="{{@index}}">
      {{this.name}}
    </button>
    <input type="text" name="system.nanite.basicReactions.{{@index}}.name" value="{{this.name}}" />
    <input type="number" name="system.nanite.basicReactions.{{@index}}.mp" value="{{this.mp}}" />
    <input type="number" name="system.nanite.basicReactions.{{@index}}.spd" value="{{this.spd}}" />
    <input type="number" name="system.nanite.basicReactions.{{@index}}.level" value="{{this.level}}" />
    <input type="number" name="system.nanite.basicReactions.{{@index}}.xp" value="{{this.xp}}" />
  </div>
  <div class="sheet-basic-nanite-notes-row">
    <textarea name="system.nanite.basicReactions.{{@index}}.notes">{{this.notes}}</textarea>
  </div>
</div>
{{/each}}

<!-- Add Basic Reaction Button -->
<button type="button" class="add-nanite-basic">
  + Add Basic Reaction
</button>

  <!-- ===== Advanced Nanite Tech ===== -->
<div class="sheet-subsection-block sheet-nanite-group">
  <h3 class="section-subtitle">Advanced Nanite Tech</h3>

  <div class="sheet-advanced-nanite-header">
    <span class="sheet-roll-spacer"></span>
    <span>Reaction</span>
    <span>MP</span>
    <span>Speed</span>
    <span>Level</span>
    <span>XP</span>
    <span>Components</span>
  </div>

 {{#each actor.system.nanite.advancedReactions}}
<div class="sheet-nanite-block">
  <div class="sheet-advanced-nanite-entry">
    <button type="button"
            class="roll-nanite"
            data-group="nanite.advancedReactions"
            data-index="{{@index}}">
      {{this.name}}
    </button>
    <input type="text" name="system.nanite.advancedReactions.{{@index}}.name" value="{{this.name}}" />
    <input type="number" name="system.nanite.advancedReactions.{{@index}}.mp" value="{{this.mp}}" />
    <input type="number" name="system.nanite.advancedReactions.{{@index}}.spd" value="{{this.spd}}" />
    <input type="number" name="system.nanite.advancedReactions.{{@index}}.level" value="{{this.level}}" />
    <input type="number" name="system.nanite.advancedReactions.{{@index}}.xp" value="{{this.xp}}" />
    <input type="text" name="system.nanite.advancedReactions.{{@index}}.components" value="{{this.components}}" />
  </div>
  <div class="sheet-advanced-nanite-notes-row">
    <textarea name="system.nanite.advancedReactions.{{@index}}.notes">{{this.notes}}</textarea>
  </div>
</div>
{{/each}}

<!-- Add Advanced Reaction Button -->
<button type="button" class="add-nanite-advanced">
  + Add Advanced Reaction
</button>

</div>

<div class="sheet-section-block sheet-theme-bio">
  <div class="sheet-group-title">
    <h2 class="section-title">Bio Profile</h2>
  </div>

  <!-- ===== Bio Description ===== -->
  <div class="sheet-subsection-block sheet-profile-group sheet-profile-desc">
    <h3 class="section-subtitle">Physical Description and Personality</h3>
    <div class="sheet-profile-notes-row">
      <textarea class="sheet-desc-box"
                name="system.profile.physDescription"
                placeholder="Describe the characterâ€™s physical features, mannerisms, and behavior.">{{actor.system.profile.physDescription}}</textarea>
    </div>
  </div>

  <!-- ===== Bio Background ===== -->
  <div class="sheet-subsection-block sheet-profile-group sheet-profile-bg">
    <h3 class="section-subtitle">Background</h3>
    <div class="sheet-profile-notes-row">
      <textarea class="sheet-bg-box"
                name="system.profile.background"
                placeholder="Character's history, origin, motivations...">{{actor.system.profile.background}}</textarea>
    </div>
  </div>

  <!-- ===== Bio Notes ===== -->
  <div class="sheet-subsection-block sheet-profile-group sheet-profile-notes">
    <h3 class="section-subtitle">Notes</h3>
    <div class="sheet-profile-notes-row">
      <textarea class="sheet-notes-box"
                name="system.profile.genNotes"
                placeholder="Miscellaneous notes, reminders, or session info.">{{actor.system.profile.genNotes}}</textarea>
    </div>
  </div>
</div>

 <!-- ===== AI Section ===== -->
<div class="sheet-section-block sheet-theme-ai">
  <div class="sheet-group-title">
    <h2 class="section-title">AI Attributes</h2>
  </div>

  <div class="sheet-2colrow">

    <!-- ===== AI PRIMARY ATTRIBUTES ===== -->
   <div class="sheet-col">
  <div class="row sheet-primary-attributes-ai">
    <h3 class="section-subtitle">Primary Attributes</h3>
    <div class="sheet-attribute-wrapper">
      <table class="sheet-attribute-table">
        <thead>
          <tr>
            <th>Attribute</th>
            <th>Score</th>
            <th>Modifier</th>
            <th>AP to Next</th>
            <th>Total AP Spent</th>
            <th>Temporary Modifier</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Processing</td>
            <td><input type="number" name="system.attributesAI.primary.PRC.score" value="{{system.attributesAI.primary.PRC.score}}" /></td>
            <td><input type="number" name="system.attributesAI.primary.PRC.mod" value="{{system.attributesAI.primary.PRC.mod}}" readonly /></td>
            <td><input type="number" name="system.attributesAI.primary.PRC.apToNext" value="{{system.attributesAI.primary.PRC.apToNext}}" readonly /></td>
            <td><input type="number" name="system.attributesAI.primary.PRC.apTotal" value="{{system.attributesAI.primary.PRC.apTotal}}" readonly /></td>
            <td><input type="number" name="system.attributesAI.primary.PRC.temp" value="{{system.attributesAI.primary.PRC.temp}}" /></td>
          </tr>
          <tr>
            <td>Sensor</td>
            <td><input type="number" name="system.attributesAI.primary.SEN.score" value="{{system.attributesAI.primary.SEN.score}}" /></td>
            <td><input type="number" name="system.attributesAI.primary.SEN.mod" value="{{system.attributesAI.primary.SEN.mod}}" readonly /></td>
            <td><input type="number" name="system.attributesAI.primary.SEN.apToNext" value="{{system.attributesAI.primary.SEN.apToNext}}" readonly /></td>
            <td><input type="number" name="system.attributesAI.primary.SEN.apTotal" value="{{system.attributesAI.primary.SEN.apTotal}}" readonly /></td>
            <td><input type="number" name="system.attributesAI.primary.SEN.temp" value="{{system.attributesAI.primary.SEN.temp}}" /></td>
          </tr>
          <tr>
            <td>Architecture</td>
            <td><input type="number" name="system.attributesAI.primary.ARC.score" value="{{system.attributesAI.primary.ARC.score}}" /></td>
            <td><input type="number" name="system.attributesAI.primary.ARC.mod" value="{{system.attributesAI.primary.ARC.mod}}" readonly /></td>
            <td><input type="number" name="system.attributesAI.primary.ARC.apToNext" value="{{system.attributesAI.primary.ARC.apToNext}}" readonly /></td>
            <td><input type="number" name="system.attributesAI.primary.ARC.apTotal" value="{{system.attributesAI.primary.ARC.apTotal}}" readonly /></td>
            <td><input type="number" name="system.attributesAI.primary.ARC.temp" value="{{system.attributesAI.primary.ARC.temp}}" /></td>
          </tr>
          <tr>
            <td>Logic</td>
            <td><input type="number" name="system.attributesAI.primary.LOG.score" value="{{system.attributesAI.primary.LOG.score}}" /></td>
            <td><input type="number" name="system.attributesAI.primary.LOG.mod" value="{{system.attributesAI.primary.LOG.mod}}" readonly /></td>
            <td><input type="number" name="system.attributesAI.primary.LOG.apToNext" value="{{system.attributesAI.primary.LOG.apToNext}}" readonly /></td>
            <td><input type="number" name="system.attributesAI.primary.LOG.apTotal" value="{{system.attributesAI.primary.LOG.apTotal}}" readonly /></td>
            <td><input type="number" name="system.attributesAI.primary.LOG.temp" value="{{system.attributesAI.primary.LOG.temp}}" /></td>
          </tr>
          <tr>
            <td>Core</td>
            <td><input type="number" name="system.attributesAI.primary.COR.score" value="{{system.attributesAI.primary.COR.score}}" /></td>
            <td><input type="number" name="system.attributesAI.primary.COR.mod" value="{{system.attributesAI.primary.COR.mod}}" readonly /></td>
            <td><input type="number" name="system.attributesAI.primary.COR.apToNext" value="{{system.attributesAI.primary.COR.apToNext}}" readonly /></td>
            <td><input type="number" name="system.attributesAI.primary.COR.apTotal" value="{{system.attributesAI.primary.COR.apTotal}}" readonly /></td>
            <td><input type="number" name="system.attributesAI.primary.COR.temp" value="{{system.attributesAI.primary.COR.temp}}" /></td>
          </tr>
          <tr>
            <td>Social</td>
            <td><input type="number" name="system.attributesAI.primary.SOCIAL.score" value="{{system.attributesAI.primary.SOCIAL.score}}" /></td>
            <td><input type="number" name="system.attributesAI.primary.SOCIAL.mod" value="{{system.attributesAI.primary.SOCIAL.mod}}" readonly /></td>
            <td><input type="number" name="system.attributesAI.primary.SOCIAL.apToNext" value="{{system.attributesAI.primary.SOCIAL.apToNext}}" readonly /></td>
            <td><input type="number" name="system.attributesAI.primary.SOCIAL.apTotal" value="{{system.attributesAI.primary.SOCIAL.apTotal}}" readonly /></td>
            <td><input type="number" name="system.attributesAI.primary.SOCIAL.temp" value="{{system.attributesAI.primary.SOCIAL.temp}}" /></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

  <!-- ===== AI SECONDARY ATTRIBUTES ===== -->
<div class="sheet-col">
  <div class="row sheet-secondary-attributes-ai">
    <h3 class="section-subtitle">Secondary Attributes</h3>
    <div class="sheet-attribute-wrapper">
      <table class="sheet-attribute-table">
        <thead>
          <tr>
            <th>Attribute</th>
            <th>Score</th>
            <th>Modifier</th>
            <th>Temporary Modifier</th>
            <th>Queue Roll</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Queue</td>
            <td><input type="number" name="system.attributesAI.secondary.QUEUE.score" value="{{system.attributesAI.secondary.QUEUE.score}}" readonly /></td>
            <td><input type="number" name="system.attributesAI.secondary.QUEUE.mod" value="{{system.attributesAI.secondary.QUEUE.mod}}" readonly /></td>
            <td><input type="number" name="system.attributesAI.secondary.QUEUE.temp" value="{{system.attributesAI.secondary.QUEUE.temp}}" /></td>
            <td>
              <button type="button"
                      class="roll-ai"
                      data-roll="{{system.attributesAI.secondary.QUEUE.rollFormula}}"
                      data-label="Queue">
                Roll
              </button>
            </td>
          </tr>
          <tr>
            <td>Learning</td>
            <td><input type="number" name="system.attributesAI.secondary.LEARNING.score" value="{{system.attributesAI.secondary.LEARNING.score}}" readonly /></td>
            <td><input type="number" name="system.attributesAI.secondary.LEARNING.mod" value="{{system.attributesAI.secondary.LEARNING.mod}}" readonly /></td>
            <td><input type="number" name="system.attributesAI.secondary.LEARNING.temp" value="{{system.attributesAI.secondary.LEARNING.temp}}" /></td>
            <td></td>
          </tr>
          <tr>
            <td>Cycles</td>
            <td><input type="number" name="system.attributesAI.secondary.CYCLES.score" value="{{system.attributesAI.secondary.CYCLES.score}}" readonly /></td>
            <td><input type="number" name="system.attributesAI.secondary.CYCLES.mod" value="{{system.attributesAI.secondary.CYCLES.mod}}" readonly /></td>
            <td><input type="number" name="system.attributesAI.secondary.CYCLES.temp" value="{{system.attributesAI.secondary.CYCLES.temp}}" /></td>
            <td></td>
          </tr>
          <tr>
            <td>Latency</td>
            <td><input type="number" name="system.attributesAI.secondary.LATENCY.score" value="{{system.attributesAI.secondary.LATENCY.score}}" readonly /></td>
            <td><input type="number" name="system.attributesAI.secondary.LATENCY.mod" value="{{system.attributesAI.secondary.LATENCY.mod}}" readonly /></td>
            <td><input type="number" name="system.attributesAI.secondary.LATENCY.temp" value="{{system.attributesAI.secondary.LATENCY.temp}}" /></td>
            <td></td>
          </tr>
          <tr>
            <td>Likeness</td>
            <td><input type="number" name="system.attributesAI.secondary.LIKE.score" value="{{system.attributesAI.secondary.LIKE.score}}" min="3" max="30" /></td>
            <td colspan="2">
              <input type="text" name="system.attributesAI.secondary.LIKE.desc" value="{{system.attributesAI.secondary.LIKE.desc}}" readonly />
            </td>
            <td></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- ===== AP Summary ===== -->
<div class="sheet-ap-summary">
  <span class="sheet-ap-label">Total AP Spent:
    <input type="number" name="system.attributesAI.ap.totalSpent" value="{{system.attributesAI.ap.totalSpent}}" readonly />
  </span>
  <span class="sheet-ap-label">Unspent AP:
    <input type="number" name="system.attributesAI.ap.unspent" value="{{system.attributesAI.ap.unspent}}" />
  </span>
</div>

<div class="sheet-section-block sheet-theme-ai">
  <div class="sheet-group-title">
    <h2 class="section-title">AI Vital Systems</h2>
  </div>

  <div class="sheet-3colrow sheet-vitals-wrapper">

 <div class="sheet-col">
  <div class="row sheet-saves-block-ai">
    <h3 class="section-subtitle">AI Saving Throws</h3>
    <div class="sheet-save-wrapper">
      <table class="sheet-save-table">
        <thead>
          <tr>
            <th>Attribute</th>
            <th>Score</th>
            <th>Temporary Modifier</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>
              <button type="button" class="roll-ai" data-label="Overload">Overload</button>
            </td>
            <td><input type="number" name="system.vitalsAI.saves.OVERLOAD.score" value="{{actor.system.vitalsAI.saves.OVERLOAD.score}}" readonly /></td>
            <td><input type="number" name="system.vitalsAI.saves.OVERLOAD.temp" value="{{actor.system.vitalsAI.saves.OVERLOAD.temp}}" /></td>
          </tr>
          <tr>
            <td>
              <button type="button" class="roll-ai" data-label="Integrity">Integrity</button>
            </td>
            <td><input type="number" name="system.vitalsAI.saves.INTEGRITY.score" value="{{actor.system.vitalsAI.saves.INTEGRITY.score}}" readonly /></td>
            <td><input type="number" name="system.vitalsAI.saves.INTEGRITY.temp" value="{{actor.system.vitalsAI.saves.INTEGRITY.temp}}" /></td>
          </tr>
          <tr>
            <td>
              <button type="button" class="roll-ai" data-label="Bypass">Bypass</button>
            </td>
            <td><input type="number" name="system.vitalsAI.saves.BYPASS.score" value="{{actor.system.vitalsAI.saves.BYPASS.score}}" readonly /></td>
            <td><input type="number" name="system.vitalsAI.saves.BYPASS.temp" value="{{actor.system.vitalsAI.saves.BYPASS.temp}}" /></td>
          </tr>
          <tr>
            <td>
              <button type="button" class="roll-ai" data-label="Firewall">Firewall</button>
            </td>
            <td><input type="number" name="system.vitalsAI.saves.FIREWALL.score" value="{{actor.system.vitalsAI.saves.FIREWALL.score}}" readonly /></td>
            <td><input type="number" name="system.vitalsAI.saves.FIREWALL.temp" value="{{actor.system.vitalsAI.saves.FIREWALL.temp}}" /></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- ===== AI STATUS ===== -->
<div class="sheet-col">
  <div class="row sheet-status-block-ai">
    <h3 class="section-subtitle">AI Status</h3>
    <div class="sheet-status-wrapper">
      <table class="sheet-status-table">
        <thead>
          <tr>
            <th></th>
            <th>Max</th>
            <th>Current</th>
            <th>Min</th>
            <th>Temp</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>IP</td>
            <td><input type="number" name="system.vitalsAI.status.IP.max" value="{{actor.system.vitalsAI.status.IP.max}}" readonly /></td>
            <td><input type="number" name="system.vitalsAI.status.IP.current" value="{{actor.system.vitalsAI.status.IP.current}}" /></td>
            <td><input type="number" name="system.vitalsAI.status.IP.min" value="{{actor.system.vitalsAI.status.IP.min}}" readonly /></td>
            <td><input type="number" name="system.vitalsAI.status.IP.temp" value="{{actor.system.vitalsAI.status.IP.temp}}" /></td>
          </tr>
          <tr>
            <td>PP</td>
            <td><input type="number" name="system.vitalsAI.status.PP.max" value="{{actor.system.vitalsAI.status.PP.max}}" readonly /></td>
            <td><input type="number" name="system.vitalsAI.status.PP.current" value="{{actor.system.vitalsAI.status.PP.current}}" /></td>
            <td><input type="number" name="system.vitalsAI.status.PP.min" value="{{actor.system.vitalsAI.status.PP.min}}" readonly /></td>
            <td><input type="number" name="system.vitalsAI.status.PP.temp" value="{{actor.system.vitalsAI.status.PP.temp}}" /></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- ===== AI FRAGMENTATION ===== -->
<div class="sheet-col">
  <div class="row sheet-fragment-block">
    <h3 class="section-subtitle">Fragmentation</h3>
    <div class="sheet-fragment-wrapper">
      <select class="sheet-fragment-select" name="system.vitalsAI.fragmentation.level">
        <option value="0" {{#if (eq actor.system.vitalsAI.fragmentation.level 0)}}selected{{/if}}>No Fragment</option>
        <option value="-2" {{#if (eq actor.system.vitalsAI.fragmentation.level -2)}}selected{{/if}}>1 Fragment</option>
        <option value="-5" {{#if (eq actor.system.vitalsAI.fragmentation.level -5)}}selected{{/if}}>2 Fragments</option>
        <option value="-10" {{#if (eq actor.system.vitalsAI.fragmentation.level -10)}}selected{{/if}}>3 Fragments</option>
        <option value="-15" {{#if (eq actor.system.vitalsAI.fragmentation.level -15)}}selected{{/if}}>4 Fragments</option>
        <option value="2" {{#if (eq actor.system.vitalsAI.fragmentation.level 2)}}selected{{/if}}>Overclocked</option>
      </select>
      <div class="sheet-fragment-penalty">
        <label class="sheet-fragment-label">Penalty:</label>
        <input type="number" name="system.vitalsAI.fragmentation.penalty" value="{{actor.system.vitalsAI.fragmentation.penalty}}" readonly />
      </div>
    </div>
  </div>
</div>

</div> <!-- End .sheet-3colrow -->
</div> <!-- End .sheet-section-block -->

<div class="sheet-section-block sheet-theme-ai">
  <div class="sheet-group-title">
    <h2 class="section-title">AI Skills</h2>
  </div>

  <div class="sheet-2colrow sheet-skills-wrapper">

    <div class="sheet-col">
  <div class="row sheet-skillgroup-combat-ai">
    <h3 class="section-subtitle">AI Combat Skills</h3>

    <div class="sheet-skill-header">
      <span class="sheet-skill-spacer"></span>
      <span class="sheet-skill-label">Skill</span>
      <span class="sheet-skill-label">Level</span>
      <span class="sheet-skill-label">XP</span>
      <span class="sheet-skill-label">Attribute</span>
    </div>

    <!-- Simple Weapon -->
    <div class="sheet-skill-entry">
      <button type="button"
              class="roll-ai-skill"
              data-group="skillsAI.combat"
              data-key="SIMPLE_WEAPON">
        Simple Weapon
      </button>
      <input type="text" value="Simple Weapon" readonly />
      <input type="number" name="system.skillsAI.combat.SIMPLE_WEAPON.level" value="{{actor.system.skillsAI.combat.SIMPLE_WEAPON.level}}" min="0" />
      <input type="number" name="system.skillsAI.combat.SIMPLE_WEAPON.xp" value="{{actor.system.skillsAI.combat.SIMPLE_WEAPON.xp}}" min="0" />
      <select name="system.skillsAI.combat.SIMPLE_WEAPON.attribute">
        <option value="PRC" {{#if (eq actor.system.skillsAI.combat.SIMPLE_WEAPON.attribute "PRC")}}selected{{/if}}>PRC</option>
        <option value="SEN" {{#if (eq actor.system.skillsAI.combat.SIMPLE_WEAPON.attribute "SEN")}}selected{{/if}}>SEN</option>
        <option value="ARC" {{#if (eq actor.system.skillsAI.combat.SIMPLE_WEAPON.attribute "ARC")}}selected{{/if}}>ARC</option>
        <option value="LOG" {{#if (eq actor.system.skillsAI.combat.SIMPLE_WEAPON.attribute "LOG")}}selected{{/if}}>LOG</option>
        <option value="COR" {{#if (eq actor.system.skillsAI.combat.SIMPLE_WEAPON.attribute "COR")}}selected{{/if}}>COR</option>
        <option value="SOCIAL" {{#if (eq actor.system.skillsAI.combat.SIMPLE_WEAPON.attribute "SOCIAL")}}selected{{/if}}>SOCIAL</option>
      </select>
    </div>

    <!-- Projectile Weapon -->
    <div class="sheet-skill-entry">
      <button type="button"
              class="roll-ai-skill"
              data-group="skillsAI.combat"
              data-key="PROJECTILE_WEAPON">
        Projectile Weapon
      </button>
      <input type="text" value="Projectile Weapon" readonly />
      <input type="number" name="system.skillsAI.combat.PROJECTILE_WEAPON.level" value="{{actor.system.skillsAI.combat.PROJECTILE_WEAPON.level}}" min="0" />
      <input type="number" name="system.skillsAI.combat.PROJECTILE_WEAPON.xp" value="{{actor.system.skillsAI.combat.PROJECTILE_WEAPON.xp}}" min="0" />
      <select name="system.skillsAI.combat.PROJECTILE_WEAPON.attribute">
        <option value="PRC" {{#if (eq actor.system.skillsAI.combat.PROJECTILE_WEAPON.attribute "PRC")}}selected{{/if}}>PRC</option>
        <option value="SEN" {{#if (eq actor.system.skillsAI.combat.PROJECTILE_WEAPON.attribute "SEN")}}selected{{/if}}>SEN</option>
        <option value="ARC" {{#if (eq actor.system.skillsAI.combat.PROJECTILE_WEAPON.attribute "ARC")}}selected{{/if}}>ARC</option>
        <option value="LOG" {{#if (eq actor.system.skillsAI.combat.PROJECTILE_WEAPON.attribute "LOG")}}selected{{/if}}>LOG</option>
        <option value="COR" {{#if (eq actor.system.skillsAI.combat.PROJECTILE_WEAPON.attribute "COR")}}selected{{/if}}>COR</option>
        <option value="SOCIAL" {{#if (eq actor.system.skillsAI.combat.PROJECTILE_WEAPON.attribute "SOCIAL")}}selected{{/if}}>SOCIAL</option>
      </select>
    </div>
  </div>
</div>

   <div class="sheet-col">
  <div class="row sheet-skillgroup-detection-ai">
    <h3 class="section-subtitle">AI Detection Skills</h3>

    <div class="sheet-skill-header">
      <span class="sheet-skill-spacer"></span>
      <span class="sheet-skill-label">Skill</span>
      <span class="sheet-skill-label">Level</span>
      <span class="sheet-skill-label">XP</span>
      <span class="sheet-skill-label">Attribute</span>
    </div>

    <!-- Perception -->
    <div class="sheet-skill-entry">
      <button type="button"
              class="roll-ai-skill"
              data-group="skillsAI.detection"
              data-key="PERCEPTION">
        Perception
      </button>
      <input type="text" value="Perception" readonly />
      <input type="number" name="system.skillsAI.detection.PERCEPTION.level" value="{{actor.system.skillsAI.detection.PERCEPTION.level}}" min="0" />
      <input type="number" name="system.skillsAI.detection.PERCEPTION.xp" value="{{actor.system.skillsAI.detection.PERCEPTION.xp}}" min="0" />
      <select name="system.skillsAI.detection.PERCEPTION.attribute">
        <option value="PRC" {{#if (eq actor.system.skillsAI.detection.PERCEPTION.attribute "PRC")}}selected{{/if}}>PRC</option>
        <option value="SEN" {{#if (eq actor.system.skillsAI.detection.PERCEPTION.attribute "SEN")}}selected{{/if}}>SEN</option>
        <option value="ARC" {{#if (eq actor.system.skillsAI.detection.PERCEPTION.attribute "ARC")}}selected{{/if}}>ARC</option>
        <option value="LOG" {{#if (eq actor.system.skillsAI.detection.PERCEPTION.attribute "LOG")}}selected{{/if}}>LOG</option>
        <option value="COR" {{#if (eq actor.system.skillsAI.detection.PERCEPTION.attribute "COR")}}selected{{/if}}>COR</option>
        <option value="SOCIAL" {{#if (eq actor.system.skillsAI.detection.PERCEPTION.attribute "SOCIAL")}}selected{{/if}}>SOCIAL</option>
      </select>
    </div>

    <!-- Intuition -->
    <div class="sheet-skill-entry">
      <button type="button"
              class="roll-ai-skill"
              data-group="skillsAI.detection"
              data-key="INTUITION">
        Intuition
      </button>
      <input type="text" value="Intuition" readonly />
      <input type="number" name="system.skillsAI.detection.INTUITION.level" value="{{actor.system.skillsAI.detection.INTUITION.level}}" min="0" />
      <input type="number" name="system.skillsAI.detection.INTUITION.xp" value="{{actor.system.skillsAI.detection.INTUITION.xp}}" min="0" />
      <select name="system.skillsAI.detection.INTUITION.attribute">
        <option value="PRC" {{#if (eq actor.system.skillsAI.detection.INTUITION.attribute "PRC")}}selected{{/if}}>PRC</option>
        <option value="SEN" {{#if (eq actor.system.skillsAI.detection.INTUITION.attribute "SEN")}}selected{{/if}}>SEN</option>
        <option value="ARC" {{#if (eq actor.system.skillsAI.detection.INTUITION.attribute "ARC")}}selected{{/if}}>ARC</option>
        <option value="LOG" {{#if (eq actor.system.skillsAI.detection.INTUITION.attribute "LOG")}}selected{{/if}}>LOG</option>
        <option value="COR" {{#if (eq actor.system.skillsAI.detection.INTUITION.attribute "COR")}}selected{{/if}}>COR</option>
        <option value="SOCIAL" {{#if (eq actor.system.skillsAI.detection.INTUITION.attribute "SOCIAL")}}selected{{/if}}>SOCIAL</option>
      </select>
    </div>
  </div>
</div>

<!-- ===== AI TRAINING PACKAGES BLOCK ===== -->
<div class="sheet-section-block sheet-theme-ai">
  <div class="sheet-group-title">
    <h2 class="section-title">AI Training Packages</h2>
  </div>

  <div class="sheet-subsection-block sheet-skillgroup-training-ai">
    <div class="sheet-skill-header">
      <span class="sheet-skill-spacer"></span>
      <span class="sheet-skill-label">Skill</span>
      <span class="sheet-skill-label">Level</span>
      <span class="sheet-skill-label">XP</span>
    </div>

    {{#each actor.system.skillsAI.trainingPackages}}
    <div class="sheet-skill-entry">
      <button type="button"
              class="roll-ai-skill"
              data-group="skillsAI.trainingPackages"
              data-index="{{@index}}">
        {{this.label}}
      </button>
      <input type="text" name="system.skillsAI.trainingPackages.{{@index}}.label" value="{{this.label}}" placeholder="Skill" />
      <input type="number" name="system.skillsAI.trainingPackages.{{@index}}.level" value="{{this.level}}" min="0" />
      <input type="number" name="system.skillsAI.trainingPackages.{{@index}}.xp" value="{{this.xp}}" min="0" />
      <select name="system.skillsAI.trainingPackages.{{@index}}.attribute">
        <option value="PRC" {{#if (eq this.attribute "PRC")}}selected{{/if}}>PRC</option>
        <option value="SEN" {{#if (eq this.attribute "SEN")}}selected{{/if}}>SEN</option>
        <option value="ARC" {{#if (eq this.attribute "ARC")}}selected{{/if}}>ARC</option>
        <option value="LOG" {{#if (eq this.attribute "LOG")}}selected{{/if}}>LOG</option>
        <option value="COR" {{#if (eq this.attribute "COR")}}selected{{/if}}>COR</option>
        <option value="SOCIAL" {{#if (eq this.attribute "SOCIAL")}}selected{{/if}}>SOCIAL</option>
      </select>
      <textarea name="system.skillsAI.trainingPackages.{{@index}}.notes" class="sheet-training-notes" placeholder="Notes...">{{this.notes}}</textarea>
    </div>
    {{/each}}

    <!-- Optional: Add Training Package Button -->
    <button type="button" class="add-ai-training-package">
      + Add AI Training Package
    </button>
  </div>
</div>

<!-- ===== AI GEAR BLOCK ===== -->
<div class="sheet-section-block sheet-theme-ai">
  <div class="sheet-group-title">
    <h2 class="section-title">AI Hardware</h2>
  </div>

  <div class="sheet-gear-wrapper sheet-gear-layout">

    <div class="sheet-gear-block sheet-gear-summary">
      <div class="sheet-gear-cell">
        <span class="sheet-gear-label">Readied Items</span>
        <input type="number" name="system.gearAI.readiedTotal" value="{{actor.system.gearAI.readiedTotal}}" readonly />
      </div>
      <div class="sheet-gear-cell">
        <span class="sheet-gear-label">Max Readied</span>
        <input type="number" value="5" readonly />
      </div>
      <div class="sheet-gear-cell">
        <span class="sheet-gear-label">Current Load</span>
        <input type="number" name="system.gearAI.carriedWeight" value="{{actor.system.gearAI.carriedWeight}}" readonly />
      </div>
      <div class="sheet-gear-cell">
        <span class="sheet-gear-label">Init Penalty</span>
        <input type="number" name="system.gearAI.initiativePenalty" value="{{actor.system.gearAI.initiativePenalty}}" />
      </div>
    </div>

    <div class="sheet-gear-block sheet-gear-tiers">
      <div class="sheet-gear-cell">
        <span class="sheet-gear-label">Light Load</span>
        <input type="number" name="system.gearAI.thresholds.light" value="{{actor.system.gearAI.thresholds.light}}" readonly />
      </div>
      <div class="sheet-gear-cell">
        <span class="sheet-gear-label">Moderate Load (-2)</span>
        <input type="number" name="system.gearAI.thresholds.moderate" value="{{actor.system.gearAI.thresholds.moderate}}" readonly />
      </div>
      <div class="sheet-gear-cell">
        <span class="sheet-gear-label">Heavy Load (-5)</span>
        <input type="number" name="system.gearAI.thresholds.heavy" value="{{actor.system.gearAI.thresholds.heavy}}" readonly />
      </div>
      <div class="sheet-gear-cell">
        <span class="sheet-gear-label">Max Carry (-10)</span>
        <input type="number" name="system.gearAI.thresholds.max" value="{{actor.system.gearAI.thresholds.max}}" readonly />
      </div>
      <div class="sheet-gear-cell">
        <span class="sheet-gear-label">Push/Drag (-15)</span>
        <input type="number" name="system.gearAI.thresholds.pushDrag" value="{{actor.system.gearAI.thresholds.pushDrag}}" readonly />
      </div>
    </div>
  </div>
</div>

<!-- ===== AI WEAPONS BLOCK ===== -->
<div class="sheet-section-block sheet-theme-ai">
  <div class="sheet-group-title">
    <h2 class="section-title">AI Weapons</h2>
  </div>

  <div class="sheet-weapon-wrapper sheet-weapons-layout">
    <div class="sheet-weapon-header">
      <span class="sheet-weapon-spacer"></span>
      <span>Weapon</span>
      <span>Skill</span>
      <span>Atk Bonus</span>
      <span>Damage</span>
      <span>Spd</span>
      <span>Ammo</span>
      <span>Mag</span>
      <span>Range</span>
      <span>HP</span>
      <span>Max HP</span>
      <span>Enc</span>
      <span>Cost</span>
      <span>Readied</span>
      <span>Carried</span>
    </div>

{{#each actor.system.weaponsAI}}
<div class="sheet-weapon-entry">
  <button type="button"
          class="roll-ai-weapon"
          data-group="weaponsAI"
          data-index="{{@index}}">
    {{this.name}}
  </button>

  <input type="text" name="system.weaponsAI.{{@index}}.name" value="{{this.name}}" />

  <select name="system.weaponsAI.{{@index}}.skill">
    <option value="Simple" {{#if (eq this.skill "Simple")}}selected{{/if}}>Simple</option>
    <option value="Projectile" {{#if (eq this.skill "Projectile")}}selected{{/if}}>Projectile</option>
  </select>

  <!-- NEW: Attribute selection -->
  <select name="system.weaponsAI.{{@index}}.attribute">
    <option value="PRC" {{#if (eq this.attribute "PRC")}}selected{{/if}}>PRC</option>
    <option value="SEN" {{#if (eq this.attribute "SEN")}}selected{{/if}}>SEN</option>
    <option value="ARC" {{#if (eq this.attribute "ARC")}}selected{{/if}}>ARC</option>
    <option value="LOG" {{#if (eq this.attribute "LOG")}}selected{{/if}}>LOG</option>
    <option value="COR" {{#if (eq this.attribute "COR")}}selected{{/if}}>COR</option>
    <option value="SOCIAL" {{#if (eq this.attribute "SOCIAL")}}selected{{/if}}>SOCIAL</option>
  </select>

  <input type="number" name="system.weaponsAI.{{@index}}.atkBonus" value="{{this.atkBonus}}" />
  <input type="text" name="system.weaponsAI.{{@index}}.damage" value="{{this.damage}}" />
  <input type="number" name="system.weaponsAI.{{@index}}.spd" value="{{this.spd}}" />
  <input type="number" name="system.weaponsAI.{{@index}}.ammo" value="{{this.ammo}}" />
  <input type="number" name="system.weaponsAI.{{@index}}.mag" value="{{this.mag}}" />
  <input type="text" name="system.weaponsAI.{{@index}}.range" value="{{this.range}}" />
  <input type="number" name="system.weaponsAI.{{@index}}.hp" value="{{this.hp}}" />
  <input type="number" name="system.weaponsAI.{{@index}}.maxHp" value="{{this.maxHp}}" />
  <input type="number" name="system.weaponsAI.{{@index}}.weight" value="{{this.weight}}" />
  <input type="number" name="system.weaponsAI.{{@index}}.cost" value="{{this.cost}}" />
  <input type="checkbox" name="system.weaponsAI.{{@index}}.readied" {{#if this.readied}}checked{{/if}} />
  <input type="checkbox" name="system.weaponsAI.{{@index}}.carried" {{#if this.carried}}checked{{/if}} />
  <textarea name="system.weaponsAI.{{@index}}.notes">{{this.notes}}</textarea>
</div>
{{/each}}

    <!-- Optional: Add Weapon Button -->
    <button type="button" class="add-ai-weapon">
      + Add AI Weapon
    </button>
  </div>
</div>

<!-- ===== AI ARMOR BLOCK ===== -->
<div class="sheet-section-block sheet-theme-ai">
  <div class="sheet-group-title">
    <h2 class="section-title">AI Armor</h2>
  </div>

  <div class="sheet-subsection-block">
    <div class="sheet-armor-wrapper sheet-armor-layout">
      <div class="sheet-armor-header">
        <span>Armor</span>
        <span>Max</span>
        <span>Current</span>
        <span>Cyc Mod</span>
        <span>Enc</span>
        <span>Cost</span>
        <span>Readied</span>
        <span>Carried</span>
      </div>

      {{#each actor.system.armorAI}}
      <div class="sheet-armor-entry">
        <input type="text" name="system.armorAI.{{@index}}.name" value="{{this.name}}" />
        <input type="number" name="system.armorAI.{{@index}}.max" value="{{this.max}}" />
        <input type="number" name="system.armorAI.{{@index}}.current" value="{{this.current}}" />
        <input type="number" name="system.armorAI.{{@index}}.cycMod" value="{{this.cycMod}}" />
        <input type="number" name="system.armorAI.{{@index}}.weight" value="{{this.weight}}" />
        <input type="text" name="system.armorAI.{{@index}}.cost" value="{{this.cost}}" />
        <input type="checkbox" name="system.armorAI.{{@index}}.readied" {{#if this.readied}}checked{{/if}} />
        <input type="checkbox" name="system.armorAI.{{@index}}.carried" {{#if this.carried}}checked{{/if}} />
        <textarea name="system.armorAI.{{@index}}.notes">{{this.notes}}</textarea>
      </div>
      {{/each}}

      <!-- Optional: Add Armor Button -->
      <button type="button" class="add-ai-armor">
        + Add AI Armor
      </button>
    </div>
  </div>
</div>

<!-- ===== AI ITEMS BLOCK ===== -->
<div class="sheet-section-block sheet-theme-ai">
  <div class="sheet-group-title">
    <h2 class="section-title">AI Items</h2>
  </div>

  <div class="sheet-items-wrapper sheet-items-layout">
    <div class="sheet-items-header">
      <span>Item</span>
      <span>#</span>
      <span>Location</span>
      <span>Enc</span>
      <span>Readied</span>
      <span>Carried</span>
    </div>

    {{#each actor.system.itemsAI}}
    <div class="sheet-items-entry">
      <input type="text" name="system.itemsAI.{{@index}}.name" value="{{this.name}}" placeholder="Item" />
      <input type="number" name="system.itemsAI.{{@index}}.quantity" value="{{this.quantity}}" />
      <input type="text" name="system.itemsAI.{{@index}}.location" value="{{this.location}}" />
      <input type="number" name="system.itemsAI.{{@index}}.weight" value="{{this.weight}}" />
      <input type="checkbox" name="system.itemsAI.{{@index}}.readied" {{#if this.readied}}checked{{/if}} />
      <input type="checkbox" name="system.itemsAI.{{@index}}.carried" {{#if this.carried}}checked{{/if}} />
      <textarea name="system.itemsAI.{{@index}}.notes">{{this.notes}}</textarea>
    </div>
    {{/each}}

    <!-- Optional: Add AI Item Button -->
    <button type="button" class="add-ai-item">
      + Add AI Item
    </button>
  </div>
</div>

<!-- ===== AI NANITE BLOCK ===== -->
<div class="sheet-section-block sheet-theme-ai">
  <div class="sheet-group-title">
    <h2 class="section-title">AI Nanite Tech</h2>
  </div>

  <div class="sheet-subsection-block sheet-nanite-group-ai">
    <h3 class="section-subtitle">Nanite Accelerators</h3>

    <div class="sheet-nanite-header">
      <span></span>
      <span>Accelerator</span>
      <span>Type</span>
    </div>

    {{#each actor.system.naniteAI.catalysts}}
    <div class="sheet-nanite-entry">
      <button
        type="button"
        class="roll-ai-nanite"
        data-group="naniteAI.catalysts"
        data-index="{{@index}}">
        {{this.name}}
      </button>
      <input type="text" name="system.naniteAI.catalysts.{{@index}}.name" value="{{this.name}}" />
      <select name="system.naniteAI.catalysts.{{@index}}.type">
        <option value="1d4" {{#if (eq this.type "1d4")}}selected{{/if}}>Minor</option>
        <option value="5d4" {{#if (eq this.type "5d4")}}selected{{/if}}>Major</option>
      </select>
      <textarea name="system.naniteAI.catalysts.{{@index}}.notes">{{this.notes}}</textarea>
    </div>
    {{/each}}

    <!-- Optional: Add Nanite Accelerator Button -->
    <button type="button" class="add-ai-nanite">
      + Add Nanite Accelerator
    </button>
  </div>
</div>

 <!-- ===== AI Basic NANITE BLOCK ===== -->
<div class="sheet-subsection-block sheet-nanite-group-ai">
  <h3 class="section-subtitle">Basic Nanite Tech</h3>

  <div class="sheet-basic-nanite-header">
    <span></span>
    <span>Reaction</span>
    <span>PP</span>
    <span>Cycles</span>
    <span>Level</span>
    <span>XP</span>
  </div>

  {{#each actor.system.naniteAI.basicReactions}}
  <div class="sheet-basic-nanite-entry">
    <button type="button"
            class="roll-ai-nanite"
            data-group="naniteAI.basicReactions"
            data-index="{{@index}}">
      {{this.name}}
    </button>
    <input type="text" name="system.naniteAI.basicReactions.{{@index}}.name" value="{{this.name}}" />
    <input type="number" name="system.naniteAI.basicReactions.{{@index}}.pp" value="{{this.pp}}" />
    <input type="number" name="system.naniteAI.basicReactions.{{@index}}.cycles" value="{{this.cycles}}" />
    <input type="number" name="system.naniteAI.basicReactions.{{@index}}.level" value="{{this.level}}" />
    <input type="number" name="system.naniteAI.basicReactions.{{@index}}.xp" value="{{this.xp}}" />
    <textarea name="system.naniteAI.basicReactions.{{@index}}.notes">{{this.notes}}</textarea>
  </div>
  {{/each}}

  <!-- Optional: Add Basic Nanite Button -->
  <button type="button" class="add-ai-basic-nanite">
    + Add Basic Nanite
  </button>
</div>

 <!-- ===== AI ADV NANITE BLOCK ===== -->
<div class="sheet-subsection-block sheet-nanite-group-ai">
  <h3 class="section-subtitle">Advanced Nanite Tech</h3>

  <div class="sheet-advanced-nanite-header">
    <span></span>
    <span>Reaction</span>
    <span>PP</span>
    <span>Cycles</span>
    <span>Level</span>
    <span>XP</span>
    <span>Components</span>
  </div>

  {{#each actor.system.naniteAI.advancedReactions}}
  <div class="sheet-advanced-nanite-entry">
    <button type="button"
            class="roll-ai-nanite"
            data-group="naniteAI.advancedReactions"
            data-index="{{@index}}">
      {{this.name}}
    </button>
    <input type="text" name="system.naniteAI.advancedReactions.{{@index}}.name" value="{{this.name}}" />
    <input type="number" name="system.naniteAI.advancedReactions.{{@index}}.pp" value="{{this.pp}}" />
    <input type="number" name="system.naniteAI.advancedReactions.{{@index}}.cycles" value="{{this.cycles}}" />
    <input type="number" name="system.naniteAI.advancedReactions.{{@index}}.level" value="{{this.level}}" />
    <input type="number" name="system.naniteAI.advancedReactions.{{@index}}.xp" value="{{this.xp}}" />
    <input type="text" name="system.naniteAI.advancedReactions.{{@index}}.components" value="{{this.components}}" />
    <textarea name="system.naniteAI.advancedReactions.{{@index}}.notes">{{this.notes}}</textarea>
  </div>
  {{/each}}

  <!-- Optional: Add Advanced Nanite Button -->
  <button type="button" class="add-ai-advanced-nanite">
    + Add Advanced Nanite
  </button>
</div>

<!-- ===== AI DESCRIPTION BLOCK ===== -->
<div class="sheet-section-block sheet-theme-ai">
  <div class="sheet-group-title">
    <h2 class="section-title">AI Profile</h2>
  </div>

  <div class="sheet-subsection-block sheet-profile-group sheet-profile-desc-ai">
    <h3 class="section-subtitle">Physical Description and Personality</h3>
    <div class="sheet-profile-notes-row">
      <textarea class="sheet-desc-box"
                name="system.profileAI.physDescription"
                placeholder="Describe the characterâ€™s physical features, mannerisms, and behavior.">{{actor.system.profileAI.physDescription}}</textarea>
    </div>
  </div>

  <div class="sheet-subsection-block sheet-profile-group sheet-profile-bg-ai">
    <h3 class="section-subtitle">Background</h3>
    <div class="sheet-profile-notes-row">
      <textarea class="sheet-bg-box"
                name="system.profileAI.background"
                placeholder="Character's history, origin, motivations...">{{actor.system.profileAI.background}}</textarea>
    </div>
  </div>

  <div class="sheet-subsection-block sheet-profile-group sheet-profile-notes-ai">
    <h3 class="section-subtitle">Notes</h3>
    <div class="sheet-profile-notes-row">
      <textarea class="sheet-notes-box"
                name="system.profileAI.notes"
                placeholder="Miscellaneous notes, reminders, or session info.">{{actor.system.profileAI.notes}}</textarea>
    </div>
  </div>
</div>

<div class="sheet-section-block sheet-theme-shared">
  <div class="sheet-group-title">
    <h2 class="section-title">Shared Section</h2>
  </div>

  <div class="sheet-2colrow sheet-shared-wrapper">

<!-- ===== Misc Section ===== -->
<div class="sheet-col">
  <div class="row sheet-shared-misc-group">
    <h3 class="section-subtitle">Misc</h3>
    <div class="sheet-misc-wrapper">
      <table class="sheet-misc-table">
        <thead>
          <tr>
            <th>Attribute</th>
            <th>Value</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Luck</td>
            <td><input type="number" name="system.shared.luck" value="{{actor.system.shared.luck}}" /></td>
          </tr>
          <tr>
            <td>Influence</td>
            <td><input type="number" name="system.shared.influence" value="{{actor.system.shared.influence}}" /></td>
          </tr>
          <tr>
            <td>Interim</td>
            <td><input type="number" name="system.shared.interim" value="{{actor.system.shared.interim}}" /></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- ===== Wealth Section ===== -->
<div class="sheet-col">
  <div class="row sheet-shared-wealth-group">
    <h3 class="section-subtitle">Wealth</h3>
    <div class="sheet-wealth-wrapper">
      <div class="sheet-wealth-input-group">
        <label for="system.shared.wealth">Wealth</label>
        <input type="number" name="system.shared.wealth" value="{{actor.system.shared.wealth}}" min="0" class="sheet-wealth-input" />
      </div>

      <div class="sheet-wealth-input-group">
        <label for="system.shared.income">Income</label>
        <input type="number" name="system.shared.income" value="{{actor.system.shared.income}}" min="0" class="sheet-wealth-input" />
      </div>
    </div>

    <div class="sheet-wealth-notes-row">
      <textarea name="system.shared.wealthNotes"
                class="sheet-wealth-notes"
                placeholder="Describe income streams, digital assets, or notes.">{{actor.system.shared.wealthNotes}}</textarea>
    </div>
  </div>
</div>